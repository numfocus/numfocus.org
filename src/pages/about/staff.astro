---
import { getImage } from 'astro:assets';
import Hero from '@components/layout/Hero.astro';
import PeopleGrid from '@components/people/PeopleGrid';
import PersonGrid from '@components/people/PersonGrid';
import directus from '@directus/directus';
import { readItems, readSingleton } from '@directus/sdk';
import BaseLayout from '@layouts/BaseLayout.astro';
import getAssetUrl from '@utils/getAssetUrl';
import getPageHero from '@utils/getPageHero';
import getPageSeo from '@utils/getPageSeo';
import getPageStub from '@utils/getPageStub';
import getPeople, { getPeopleByCategory } from '@utils/getPeople';

import type { Page, Person } from 'env';

const parent = await getPageStub('about');

const global = await directus.request(readSingleton('General'));

const pageHero = await getPageHero('staff');
const pageSeo = await getPageSeo('staff');

const people = await getPeople();

const fewerPeople = await getPeopleByCategory(1);
---

<BaseLayout
	title={`${pageHero?.title} | ${global.site_name} - ${global.site_subheader}`}
	seo={pageSeo}
>
	{pageHero && <Hero pageHero={pageHero} parent={parent as Page} />}

	<PeopleGrid people={people} client:load />
</BaseLayout>
