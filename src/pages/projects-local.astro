---
import Container from '@components/Container.astro';
import ProjectsLayout from '@layouts/ProjectsLayout.astro';
import ProjectGrid from '@components/ProjectGrid/ProjectGrid';
import Hero from '@components/Hero.astro';
import getPageHero from '@utils/getPageHero';
import { getCollection, getEntry } from 'astro:content';
import type { CollectionEntry } from "astro:content";

import { Markdown } from '@astropub/md';
import { Image } from 'astro:assets';
import type {
  LocalProject
} from 'env';

import directus from '../../lib/directus';
import { readItems, readSingleton } from '@directus/sdk';
import { MoveDiagonal, Link2, Star } from 'lucide-react';
import { twMerge } from 'tailwind-merge';
import projectsSchema from "../data/projects/projects.schema.json";


const projects: LocalProject[] = await getCollection('projects');

const footerDefaultStyle = `flex h-12 w-full place-items-center border justify-center gap-2`;

const global = await directus.request(readSingleton('General'));

const { features, industries, languages, type } = projectsSchema.properties;

const filterOptions = { 
  features: features.items.enum,
  industries: industries.items.enum,
  languages: languages.items.enum,
  type: type.enum,
};

const pageHero = await getPageHero('projects');
---

<ProjectsLayout
  title={`Projects | ${global.site_name} - ${global.site_subheader}`}
>
  <Hero pageHero={pageHero} />
  <Container>
    <ProjectGrid {filterOptions} {projects} client:load />
  </Container>
</ProjectsLayout>
